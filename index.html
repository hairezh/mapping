<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>Gravador de Tela Leve</title>
<style>
body{
  background:#0f1115;
  color:#e6e6e6;
  font-family:system-ui;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
  gap:20px;
}

button{
  background:#1f2430;
  border:1px solid #333;
  color:white;
  padding:12px 20px;
  font-size:16px;
  cursor:pointer;
  border-radius:6px;
}

button:hover{
  background:#2b3245;
}

video{
  max-width:600px;
  border:1px solid #333;
}

#status{
  color:#7aa2ff;
}
</style>
</head>
<body>

<h2>Gravador de Tela Leve</h2>

<div>
<button onclick="start()">Iniciar</button>
<button onclick="stop()">Parar</button>
<button onclick="download()">Baixar</button>
</div>

<div id="status">Parado</div>

<video id="preview" controls></video>

<script>
let recorder;
let chunks = [];
let blob;

async function start(){

  const stream = await navigator.mediaDevices.getDisplayMedia({
    video:{
      frameRate:15
    },
    audio:false
  });

  recorder = new MediaRecorder(stream,{
    mimeType:"video/webm; codecs=vp8",
    videoBitsPerSecond:800000
  });

  chunks = [];

  recorder.ondataavailable = e=>{
    if(e.data.size > 0)
      chunks.push(e.data);
  };

  recorder.onstop = ()=>{
    blob = new Blob(chunks,{type:"video/webm"});
    preview.src = URL.createObjectURL(blob);
  };

  recorder.start();

  status.innerText="Gravando...";
}

function stop(){

  recorder.stop();

  status.innerText="Parado";
}

function download(){

  if(!blob) return;

  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="gravacao.webm";
  a.click();
}
</script>

</body>
</html>
